<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="507px" preserveAspectRatio="none" style="width:609px;height:507px;" version="1.1" viewBox="0 0 609 507" width="609px" zoomAndPan="magnify"><defs><filter height="300%" id="f13giuo4lnn7rn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f13giuo4lnn7rn)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="350" x="248.5" y="71.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="54.5938" y2="451.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="203.5" x2="203.5" y1="54.5938" y2="451.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="309.5" x2="309.5" y1="54.5938" y2="451.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="423.5" x2="423.5" y1="54.5938" y2="451.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="537.5" x2="537.5" y1="54.5938" y2="451.3203"/><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="33" x="48" y="22.9951">«isr»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="15" y="39.292">ADC complete</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="8" y="450.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="33" x="48" y="470.3154">«isr»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="15" y="486.6123">ADC complete</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="158.5" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="165.5" y="39.292">Data store</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="158.5" y="450.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="165.5" y="470.3154">Data store</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="258.5" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="265.5" y="39.292">Notifications</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="258.5" y="450.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="265.5" y="470.3154">Notifications</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="370.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="389.5" y="22.9951">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="377.5" y="39.292">QTR-HD-06A</text><rect fill="#98FB98" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="370.5" y="450.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="389.5" y="470.3154">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="377.5" y="486.6123">QTR-HD-06A</text><rect fill="#87CEFA" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="486.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="500" y="22.9951">«adapter»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="493.5" y="39.292">Coordinates</text><rect fill="#87CEFA" filter="url(#f13giuo4lnn7rn)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="486.5" y="450.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="500" y="470.3154">«adapter»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="493.5" y="486.6123">Coordinates</text><path d="M248.5,71.5938 L312.5,71.5938 L312.5,78.5938 L302.5,88.5938 L248.5,88.5938 L248.5,71.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="350" x="248.5" y="71.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="263.5" y="84.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="327.5" y="83.8042">[before first or already read]</text><polygon fill="#A80036" points="434.5,105.8594,424.5,109.8594,434.5,113.8594,430.5,109.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="428.5" x2="536.5" y1="109.8594" y2="109.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="440.5" y="104.7935">read</text><polygon fill="#A80036" points="320.5,134.9922,310.5,138.9922,320.5,142.9922,316.5,138.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314.5" x2="422.5" y1="138.9922" y2="138.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="326.5" y="133.9263">take ROUTE</text><polygon fill="#A80036" points="411.5,164.125,421.5,168.125,411.5,172.125,415.5,168.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="309.5" x2="417.5" y1="168.125" y2="168.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="316.5" y="163.0591">false</text><polygon fill="#A80036" points="525.5,193.2578,535.5,197.2578,525.5,201.2578,529.5,197.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="531.5" y1="197.2578" y2="197.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="430.5" y="192.1919">not ready</text><polygon fill="#A80036" points="191.5,241.957,201.5,245.957,191.5,249.957,195.5,245.957" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="197.5" y1="245.957" y2="245.957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="73.5" y="240.8911">store conversions</text><path d="M208,217.2578 L208,257.2578 L378,257.2578 L378,227.2578 L368,217.2578 L208,217.2578 " fill="#FBFB77" filter="url(#f13giuo4lnn7rn)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M368,217.2578 L368,227.2578 L378,227.2578 L368,217.2578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="214" y="234.3247">every 1ms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="214" y="249.4575">triggered by TIM6 TRGO</text><polygon fill="#A80036" points="297.5,283.6563,307.5,287.6563,297.5,291.6563,301.5,287.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="303.5" y1="287.6563" y2="287.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="73.5" y="282.5903">give ROUTE</text><polygon fill="#A80036" points="434.5,312.7891,424.5,316.7891,434.5,320.7891,430.5,316.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="428.5" x2="536.5" y1="316.7891" y2="316.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="440.5" y="311.7231">read</text><polygon fill="#A80036" points="320.5,341.9219,310.5,345.9219,320.5,349.9219,316.5,345.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314.5" x2="422.5" y1="345.9219" y2="345.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="326.5" y="340.856">take ROUTE</text><polygon fill="#A80036" points="411.5,371.0547,421.5,375.0547,411.5,379.0547,415.5,375.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="309.5" x2="417.5" y1="375.0547" y2="375.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="316.5" y="369.9888">true</text><polygon fill="#A80036" points="214.5,400.1875,204.5,404.1875,214.5,408.1875,210.5,404.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="208.5" x2="422.5" y1="404.1875" y2="404.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="220.5" y="399.1216">read and average</text><polygon fill="#A80036" points="525.5,429.3203,535.5,433.3203,525.5,437.3203,529.5,433.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="531.5" y1="433.3203" y2="433.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="430.5" y="428.2544">conversions</text><!--MD5=[506ca26be2f8ed591095b960a975bf09]
@startuml impl-hardware-coords-ready

participant "ADC complete" as adc_isr <<isr>> #palegreen
participant "Data store" as data #palegreen
participant "Notifications" as notifications #palegreen
participant "QTR-HD-06A" as sensor <<device>> #palegreen
participant "Coordinates" as adapter <<adapter>> #lightskyblue

alt before first or already read
    sensor <- adapter : read
    sensor -> notifications : take ROUTE
    sensor <- - notifications : false
    sensor - -> adapter : not ready
end

adc_isr -> data : store conversions
note right : every 1ms\ntriggered by TIM6 TRGO
adc_isr -> notifications : give ROUTE
sensor <- adapter : read
sensor -> notifications : take ROUTE
sensor <- - notifications : true
sensor -> data : read and average
sensor - -> adapter : conversions

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.7+6-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: pl
Country: PL
--></g></svg>