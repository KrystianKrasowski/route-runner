<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="464px" preserveAspectRatio="none" style="width:563px;height:464px;" version="1.1" viewBox="0 0 563 464" width="563px" zoomAndPan="magnify"><defs><filter height="300%" id="f1v0ey4m942zjr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1v0ey4m942zjr)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="397.5" x="154.5" y="71.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="54.5938" y2="408.1875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="215.5" x2="215.5" y1="54.5938" y2="408.1875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="368" x2="368" y1="54.5938" y2="408.1875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="490" x2="490" y1="54.5938" y2="408.1875"/><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="33" x="46" y="22.9951">«isr»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="15" y="39.292">TIM15 update</text><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="8" y="407.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="33" x="46" y="427.1826">«isr»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="15" y="443.4795">TIM15 update</text><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="164.5" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="171.5" y="39.292">Notifications</text><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="164.5" y="407.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="171.5" y="427.1826">Notifications</text><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="309" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="334.5" y="22.9951">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="316" y="39.292">Timeout guard</text><rect fill="#98FB98" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="309" y="407.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="64" x="334.5" y="427.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="316" y="443.4795">Timeout guard</text><rect fill="#87CEFA" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="438" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="452.5" y="22.9951">«adapter»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="445" y="39.292">Route guard</text><rect fill="#87CEFA" filter="url(#f1v0ey4m942zjr)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="438" y="407.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="452.5" y="427.1826">«adapter»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="445" y="443.4795">Route guard</text><path d="M154.5,71.5938 L218.5,71.5938 L218.5,78.5938 L208.5,88.5938 L154.5,88.5938 L154.5,71.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="397.5" x="154.5" y="71.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="169.5" y="84.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="233.5" y="83.8042">[no timeout yet]</text><polygon fill="#A80036" points="379.5,105.8594,369.5,109.8594,379.5,113.8594,375.5,109.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373.5" x2="489" y1="109.8594" y2="109.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="385.5" y="104.7935">read</text><polygon fill="#A80036" points="226.5,134.9922,216.5,138.9922,226.5,142.9922,222.5,138.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="220.5" x2="367.5" y1="138.9922" y2="138.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="232.5" y="133.9263">take ROUTE_GUARD</text><polygon fill="#A80036" points="356.5,164.125,366.5,168.125,356.5,172.125,360.5,168.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="215.5" x2="362.5" y1="168.125" y2="168.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="222.5" y="163.0591">false</text><polygon fill="#A80036" points="478,193.2578,488,197.2578,478,201.2578,482,197.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="368.5" x2="484" y1="197.2578" y2="197.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="375.5" y="192.1919">OK</text><polygon fill="#A80036" points="203.5,249.5234,213.5,253.5234,203.5,257.5234,207.5,253.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64.5" x2="209.5" y1="253.5234" y2="253.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="71.5" y="248.4575">give ROUTE_GUARD</text><path d="M220,217.2578 L220,272.2578 L394,272.2578 L394,227.2578 L384,217.2578 L220,217.2578 " fill="#FBFB77" filter="url(#f1v0ey4m942zjr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M384,217.2578 L384,227.2578 L394,227.2578 L384,217.2578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="226" y="234.3247">occurs when vehicle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="226" y="249.4575">runs off the route more</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="226" y="264.5903">than 500ms</text><polygon fill="#A80036" points="379.5,298.7891,369.5,302.7891,379.5,306.7891,375.5,302.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373.5" x2="489" y1="302.7891" y2="302.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="385.5" y="297.7231">read</text><polygon fill="#A80036" points="226.5,327.9219,216.5,331.9219,226.5,335.9219,222.5,331.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="220.5" x2="367.5" y1="331.9219" y2="331.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="232.5" y="326.856">take ROUTE_GUARD</text><polygon fill="#A80036" points="356.5,357.0547,366.5,361.0547,356.5,365.0547,360.5,361.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="215.5" x2="362.5" y1="361.0547" y2="361.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="222.5" y="355.9888">true</text><polygon fill="#A80036" points="478,386.1875,488,390.1875,478,394.1875,482,390.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="368.5" x2="484" y1="390.1875" y2="390.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="375.5" y="385.1216">TIMEOUT</text><!--MD5=[8b896c53db96baccbab7c57f187b130f]
@startuml impl-hardware-timeout-guard-ready

participant "TIM15 update" as tim_isr <<isr>> #palegreen
participant "Notifications" as notifications #palegreen
participant "Timeout guard" as guard <<device>> #palegreen
participant "Route guard" as adapter <<adapter>> #lightskyblue

alt no timeout yet
    guard <- adapter: read
    guard -> notifications : take ROUTE_GUARD
    guard <- - notifications : false
    guard - -> adapter : OK
end

tim_isr -> notifications : give ROUTE_GUARD
note right: occurs when vehicle \nruns off the route more \nthan 500ms
guard <- adapter: read
guard -> notifications : take ROUTE_GUARD
guard <- - notifications : true
guard - -> adapter : TIMEOUT

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.7+6-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: pl
Country: PL
--></g></svg>